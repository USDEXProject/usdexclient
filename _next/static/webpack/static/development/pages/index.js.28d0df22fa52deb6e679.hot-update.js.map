{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.28d0df22fa52deb6e679.hot-update.js","sources":["webpack:///./components/common/nav.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport swal from 'sweetalert';\r\nimport setting from '../../client.setting.json';\r\nimport {setState,callbalances} from '../../actions';\r\nimport web3 from '../../lib/web3';\r\nfunction MetaMaskSvg(){\r\n    return (\r\n       <img src=\"/static/img/metamask.png\" alt=\"\" className=\"w-10 h-10\"/> \r\n    )\r\n}\r\nfunction AddressInfo({account,ethCount,bnbCount,usdexCount,dispatch}){\r\n    useEffect(()=>{\r\n        dispatch(callbalances(account));\r\n    },[account])\r\n    return (\r\n        <div className=\"text-sm\">\r\n            <div className=\"text-blue mb-2\">{account}</div>\r\n            <div className=\"flex justify-between\">\r\n                <div className=\"font-bold text-xs\">ETH: {ethCount}</div>\r\n                <div className=\"font-bold text-xs\">BNB: {bnbCount}</div>\r\n                <div className=\"font-bold text-xs\">USDEX: {usdexCount}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nconst ConnectAddressInfo = connect(({account,ethCount,bnbCount,usdexCount,dispatch})=>({account,ethCount,bnbCount,usdexCount,dispatch}))(AddressInfo);\r\nfunction MetaMask({readyBuy,metaMask,chainId,dispatch}){\r\n    useEffect(function(){\r\n        async function isMetaMask(){\r\n            if (web3.currentProvider.isMetaMask){\r\n                dispatch(setState({metaMask: true}));\r\n                if (web3.currentProvider.networkVersion === setting.chainId){\r\n                    dispatch(setState({chainId: true}));\r\n                    web3.currentProvider.on('accountsChanged',function(accounts){\r\n                    if (accounts && accounts[0]){\r\n                        return dispatch(setState({account: accounts[0]}));\r\n                    }\r\n                    dispatch(setState({readyBuy: false,account: null}));\r\n                    });\r\n                    web3.currentProvider.on('networkChanged',function(networkId){\r\n                        console.log('network changed',networkId);\r\n                    })\r\n                    const accounts = await web3.eth.getAccounts();\r\n                    if (accounts && accounts[0]){\r\n                        dispatch(setState({readyBuy: true,account: accounts[0]}));    \r\n                        return;\r\n                    }\r\n                } else {\r\n                                        \r\n                }\r\n            }\r\n        }\r\n        isMetaMask();\r\n        return function(){\r\n\r\n        }\r\n    },[]);\r\n    function chooseNetwork(){\r\n        return swal(\"Oops!\", `Please using ${setting.chainText} network in metamask!`, \"error\");\r\n    }\r\n    function installMetaMask(){\r\n        return swal(\"Oops!\",\"MetaMask not found. Please install MetaMask extension!\",\"error\",{\r\n            buttons: {\r\n                chrome: {\r\n                    \"text\": \"Chrome\",\r\n                    \"value\": \"chrome\"\r\n                },\r\n                firefox: {\r\n                    \"text\": \"Firefox\",\r\n                    \"value\": \"firefox\"\r\n                },\r\n                opera:{\r\n                    \"text\": \"Opera\",\r\n                    \"value\": \"opera\"\r\n                }\r\n            }\r\n        }).then((value)=>{\r\n            switch(value){\r\n                case \"chrome\":\r\n                return window.open(\"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn\",\"_blank\");\r\n                break;\r\n                case \"firefox\":\r\n                return window.open(\"https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/\",\"_blank\");\r\n                break;\r\n                case \"opera\":\r\n                return window.open(\"https://addons.opera.com/en/extensions/details/metamask/\",\"_blank\");\r\n                default:\r\n                break;\r\n            }\r\n        });\r\n    }\r\n    async function connectMetaMask(){\r\n       try {\r\n            const accounts = await web3.currentProvider.enable();\r\n            if (accounts && accounts[0]){\r\n                dispatch(setState({readyBuy: true,account: accounts[0]}));\r\n            }\r\n       } catch(err) {\r\n           console.log(err);\r\n       }\r\n    }\r\n    return (\r\n        \r\n            readyBuy && metaMask && chainId ? (<ConnectAddressInfo />):(metaMask?(chainId?(<button className=\"px-4 py-2 bg-green-light text-white rounded shadow focus:outline-none hover:bg-green mt-2 md:mt-0 flex items-center\" onClick={()=>connectMetaMask()}><MetaMaskSvg /><div className=\"text-left pl-2\"><p className=\"text-grey-darker text-sm\">Not connected</p><p className=\"mt-1 font-bold\">Connect a wallet</p></div></button>):(<button className=\"px-4 py-2 bg-green-light text-white rounded shadow focus:outline-none hover:bg-green mt-2 md:mt-0 flex items-center\" onClick={()=>chooseNetwork()}><MetaMaskSvg /><div className=\"text-left pl-2\"><p className=\"text-grey-darker text-sm\">Not connected</p><p className=\"mt-1 font-bold\">Connect a wallet</p></div></button>)):(<button className=\"px-4 py-2 bg-green-light text-white rounded shadow focus:outline-none hover:bg-green mt-2 md:mt-0 flex items-center\" onClick={()=>installMetaMask()}><MetaMaskSvg /><div className=\"text-left pl-2\"><p className=\"text-grey-darker text-sm\">Not connected</p><p className=\"mt-1 font-bold\">Connect a wallet</p></div></button>))\r\n    )\r\n}\r\nconst ConnectMetaMask = connect(state=>state)(MetaMask);\r\nfunction Nav(){\r\n    const [hide,setHide] = useState(true);\r\n    return (\r\n        <div className=\"bg-white\">\r\n            <nav className=\"container mx-auto flex flex-wrap justify-between items-center px-4 py-4 lg:px-8\">\r\n                <a className=\"text-blue no-underline text-4xl font-bold\" href=\"/\" >\r\n                    <svg className=\"w-32\" viewBox=\"0 0 179.64 48.18\">\r\n                        <path fill=\"#3490dc\" d=\"M7148.37,7181.39a19.88,19.88,0,0,1-9.84-2.28,23.8,23.8,0,0,1-10.08,2.52c-7.62,0-12.06-4-12.06-13.26v-20.22h11.4v19.32c0,3.66,1.74,5.28,5.34,5.28a9,9,0,0,0,3.84-.84v-23.76h11.4Z\" transform=\"translate(-7116.39 -7133.45)\"/><path fill=\"#3490dc\" d=\"M7165.65,7169.51l-1.74-.36c-5.82-1.2-9.6-3.06-9.6-9.72,0-7.44,5.1-11.88,13.68-11.88a29.31,29.31,0,0,1,10.74,2v8a28.19,28.19,0,0,0-8.34-1.44c-3.42,0-4.5.6-4.5,1.44s1.62,1.32,3.78,1.8l1.62.36c5.64,1.26,9.78,3.78,9.78,10.62,0,7.14-5,11.34-13.44,11.34-3.6,0-8.7-.78-12-2.52v-7.92a27.58,27.58,0,0,0,10,1.86c2.88,0,3.84-.36,3.84-1.44S7167.93,7170,7165.65,7169.51Z\" transform=\"translate(-7116.39 -7133.45)\"/><path fill=\"#3490dc\" d=\"M7220.61,7181.39a19.82,19.82,0,0,1-9.66-2.22,21.46,21.46,0,0,1-10,2.46c-9.48,0-15.78-6.78-15.78-17s6.66-17.1,16.62-17.1a17.67,17.67,0,0,1,7.38,1.68v-12.48l11.4-3.3Zm-16.68-8.64a12.15,12.15,0,0,0,5.28-1.38v-13.68a10.69,10.69,0,0,0-4.56-1.26c-4.62,0-7.68,3.24-7.68,8.16S7199.55,7172.75,7203.93,7172.75Z\" transform=\"translate(-7116.39 -7133.45)\"/><path fill=\"#3490dc\" d=\"M7258.89,7168.61h-20.82c.54,2.82,2.22,4.14,7.74,4.14a48,48,0,0,0,11.22-1.68v8.34a42.54,42.54,0,0,1-13.92,2.22c-10.14,0-16.8-5.52-16.8-16.62,0-10.44,6.6-17.46,16.5-17.46s16.5,6.6,16.5,16.5A26.77,26.77,0,0,1,7258.89,7168.61Zm-20.88-7.2h9.66c-.48-3.24-1.92-5.34-4.8-5.34S7238.49,7158.17,7238,7161.41Z\" transform=\"translate(-7116.39 -7133.45)\"/><path fill=\"#3490dc\" d=\"M7283.43,7181q-2.43-4.5-5-8.82c-1.8,2.88-3.54,5.82-5.1,8.82h-12.6a175.47,175.47,0,0,1,11.28-17.16,183,183,0,0,1-10.74-15.72h12.6c1.38,2.4,2.88,4.92,4.5,7.5,1.56-2.58,3.06-5.1,4.44-7.5h12.6a181.72,181.72,0,0,1-10.68,15.66A177.13,177.13,0,0,1,7296,7181Z\" transform=\"translate(-7116.39 -7133.45)\"/>\r\n                    </svg>\r\n                </a>\r\n                <button className=\"md:hidden w-6 h-6 focus:outline-none flex\" onClick={()=>setHide(!hide)}>\r\n                    <svg className=\"w-full h-full fill-current text-blue-darker\" viewBox=\"0 0 448 512\">\r\n                        <path fill=\"currentColor\" d=\"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"></path>\r\n                    </svg>\r\n                </button>\r\n                <div className={`w-full text-right md:flex-1 md:flex md:justify-center md:items-center ${hide?'hidden':''}`}>\r\n                    <a className=\"block text-blue-darker no-underline font-bold hover:text-blue mt-2 md:mr-8 md:mt-0\" href=\"/network\" >Network</a>\r\n                    <a className=\"block text-blue-darker no-underline font-bold hover:text-blue mt-2 md:mt-0\" href=\"\" >Help</a>\r\n                </div>\r\n                <div className={`w-full text-right md:w-auto md:block ${hide?'hidden':''}`}>\r\n                    <ConnectMetaMask />\r\n                </div>\r\n            </nav>\r\n        </div>\r\n    )\r\n}\r\nexport default Nav;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAbA;AAAA;AACA;AADA;AAcA;AACA;AAfA;AAAA;AAAA;AAAA;AACA;AAeA;AAAA;AAAA;AAAA;AAhBA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AACA;AAwBA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AADA;AAgBA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAVA;AAYA;AACA;AACA;AAjEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAiEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AANA;AAAA;AACA;AADA;AAAA;AAAA;AAOA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAjEA;AAAA;AACA;AA0EA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAMA;AACA;AAAA;;;;A","sourceRoot":""}